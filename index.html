<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MetaLions</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Open+Sans+Condensed:wght@300;700&family=Thasadith:ital,wght@0,400;0,700;1,400;1,700&display=swap');
    </style>
    <link href="https://cdn.jsdelivr.net/gh/hung1001/font-awesome-pro@4cac1a6/css/all.css" rel="stylesheet"
        type="text/css" />
    <link rel="stylesheet" href="./dist/app.css?v=1234">
    <link rel="stylesheet" href="./custom.css?v=1">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <style type="text/css">
        @import url("https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css");
        @import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap");
    </style>
</head>

<body>
    <div class="min-h-screen select-none">
        <div class="lock">
            <div class="box">
                <div class="clock">13:37</div>
                <div class="date">Sunday, January 37</div>
            </div>
        </div>
        <div class="signin-blur">
        </div>
        <div class="signin box hidden">
            <div class="avatar">
                <img src="./assets/images/lionProfil.png" alt="User" />
            </div>
            <div class="user">MetaLions</div>
            <div class="welcome hidden">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                    style="margin: auto; display: block;" width="148px" height="148px" viewBox="0 0 100 100"
                    preserveAspectRatio="xMidYMid">
                    <g>
                        <circle cx="72.214" cy="67.045" fill="#ffffff" r="3">
                            <animateTransform attributeName="transform" type="rotate" calcMode="spline"
                                values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite"
                                dur="2s" begin="0s"></animateTransform>
                        </circle>
                        <circle cx="67.045" cy="72.214" fill="#ffffff" r="3">
                            <animateTransform attributeName="transform" type="rotate" calcMode="spline"
                                values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite"
                                dur="2s" begin="-0.062s"></animateTransform>
                        </circle>
                        <circle cx="60.715" cy="75.869" fill="#ffffff" r="3">
                            <animateTransform attributeName="transform" type="rotate" calcMode="spline"
                                values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite"
                                dur="2s" begin="-0.125s"></animateTransform>
                        </circle>
                        <circle cx="53.655" cy="77.76" fill="#ffffff" r="3">
                            <animateTransform attributeName="transform" type="rotate" calcMode="spline"
                                values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite"
                                dur="2s" begin="-0.187s"></animateTransform>
                        </circle>
                        <circle cx="46.345" cy="77.76" fill="#ffffff" r="3">
                            <animateTransform attributeName="transform" type="rotate" calcMode="spline"
                                values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite"
                                dur="2s" begin="-0.25s"></animateTransform>
                        </circle>
                        <circle cx="39.285" cy="75.869" fill="#ffffff" r="3">
                            <animateTransform attributeName="transform" type="rotate" calcMode="spline"
                                values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite"
                                dur="2s" begin="-0.312s"></animateTransform>
                        </circle>
                        <circle cx="32.955" cy="72.214" fill="#ffffff" r="3">
                            <animateTransform attributeName="transform" type="rotate" calcMode="spline"
                                values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite"
                                dur="2s" begin="-0.375s"></animateTransform>
                        </circle>
                        <circle cx="27.786" cy="67.045" fill="#ffffff" r="3">
                            <animateTransform attributeName="transform" type="rotate" calcMode="spline"
                                values="0 50 50;360 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite"
                                dur="2s" begin="-0.437s"></animateTransform>
                        </circle>
                        <animateTransform attributeName="transform" type="rotate" calcMode="spline"
                            values="0 50 50;0 50 50" times="0;1" keySplines="0.5 0 0.5 1" repeatCount="indefinite"
                            dur="2s"></animateTransform>
                    </g>
                </svg>
            </div>
            <div class="inputArea">
                <div class="inputs">
                    <input type="text" id="username" placeholder="Username" readonly required />
                    <div class="action">
                        <input type="password" id="password" placeholder="Password" readonly required />
                        <div class="sign"><i class="fas fa-arrow-right"></i></div>
                    </div>
                </div>
                <div class="options">Sign-in options</div>
                <div class="actions">
                    <div class="action">
                        <i class="far fa-power-off"></i>
                    </div>
                </div>
            </div>

        </div>
        <div class="desktop hidden">
            <div class="bg-mask" style="display: none;"></div>
            <div class="selection-area"></div>
            <div class="contextArea"></div>
            <div class="programs"></div>
            <div class="windows">
                <div class="window hidden" id="welcome">
                    <div class="main">
                        <div class="controls">
                            <div class="left">
                                <div class="favicon">
                                    <img src="./assets/images/lion.png" alt="Favicon" />
                                </div>
                            </div>
                            <div class="center">
                                <div class="title">Logged in 127.0.0.1 as lion@meta</div>
                            </div>
                            <div class="right"></div>
                        </div>
                        <div class="content text-[48px]">
                            lion@meta:~$ <span id="welcomeMessage"></span>
                        </div>
                        <div class="footer">LionOS v1.2</div>
                    </div>
                </div>
            </div>
            <div class="startMenu hidden">
                <div class="content">
                    <div class="left">
                        <div class="content">
                            <div class="top">
                                <i class="far fa-grip-lines"></i>
                            </div>
                            <!--div class="bottom">
                                <img src="./assets/images/user.png" />
                                <i class="far fa-power-off"></i>
                            </div-->
                        </div>
                    </div>
                    <div class="center">
                        <div class="content">
                            <div class="title">
                                Latest opened apps
                            </div>
                            <div class="apps"></div>
                        </div>
                    </div>
                    <div class="right">
                        <div class="content">
                            <div class="title">
                                Latest posts from Twitter
                            </div>
                            <div class="posts" id="twitterPosts"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="contextMenu">
                <div class="items">
                    <div class="item" data-action="refresh">Refresh</div>
                </div>
            </div>
            <div class="taskbarContextMenu">
                <div class="items">
                    <div class="item" data-action="close">Close</div>
                </div>
            </div>
            <div class="taskbar">

                <div class="menu">
                    <span class="fa fa-twitter fa-2x fa-inverse f-fw hidden" onclick="goLink('twitter')"></span>
                    <span class="fa fa-instagram fa-2x fa-inverse f-fw hidden" onclick="goLink('instagram')"></span>
                    <span class="fa fa-medium fa-2x fa-inverse f-fw hidden" onclick="goLink('medium')"></span>
                    <span class="fa fa-reddit fa-2x fa-inverse f-fw hidden" onclick="goLink('reddit')"></span>
                    <span class="fab fa-discord fa-2x fa-inverse f-fw hidden" onclick="goLink('discord')"></span>
                    <span class="fa fa-bars fa-2x fa-inverse f-fw"></span>
                </div>
                <div class="task startMenuBtn">
                    <img src="./assets/images/lion2.png" alt="Start" />
                </div>
                <div class="task wallet">
                    Click to connect wallet!
                </div>
                <div class="task date">
                    <div class="clock">13:37 PM</div>
                    <div class="dateS">01/01/1337</div>

                    <div class="showPeekDesktop"></div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"
        integrity="sha512-uto9mlQzrs59VwILcLiRYeLKPPbS/bT71da/OEBYEwcdNUk8jYIy+D176RYoop1Da+f9mvkYrmj5MCLZWEtQuA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.19/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/TypewriterJS/2.18.2/core.min.js"
        integrity="sha512-g8TodWNzrsxJkADtGuwwvVND2MVKUuisGWZsj2/NtLA/XFDq9biQpeDMcJ8iu71OpabLfDxfEAdTQFdXjmV60A=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"
        integrity="sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script type="module">
        import SelectionArea from 'https://cdn.jsdelivr.net/npm/@viselect/vanilla/lib/viselect.esm.js'; const selection = new SelectionArea({ selectables: [".desktop > .programs > .program"], boundaries: [".contextArea"] }).on("start", ({ store, event }) => { if (!(event).ctrlKey && !(event).metaKey) { for (const el of store.stored) { el.classList.remove("selected"); } selection.clearSelection(); } }).on("move", ({ store: { changed: { added, removed } } }) => {
            for (const el of added) {
                el.classList.add("selected");
            } for (const el of removed) { el.classList.remove("selected"); }
        }).on("stop", ({ store: { stored } }) => { });
    </script>

    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <!--script src="https://browser.sentry-cdn.com/6.16.1/bundle.min.js" integrity="sha384-WkFzsrcXKeJ3KlWNXojDiim8rplIj1RPsCbuv7dsLECoXY8C6Cx158CMgl+O+QKW" crossorigin="anonymous"></script-->
    <script type="text/javascript">
        /*Sentry.init({
            dsn: "https://fc4b9783d084452c904403f734979900@o422512.ingest.sentry.io/6119683",
            //integrations: [new Integrations.BrowserTracing()],
            tracesSampleRate: 1.0,
        });*/
    </script>

    <script>
        date();
        function date() {
            // Get user's local date
            var currentDate = new Date();
            // Set the date in variables
            day = currentDate.getDate();
            month = currentDate.getMonth() + 1;
            year = currentDate.getFullYear();
            // Output the date
            $('.dateS').text(day + "/" + month + "/" + year);
        }
    </script>
    <script type="text/javascript">
        if ($(document).width() < 768) {
            location.href = "../m/index.html";
        }
        $(window).on('resize', function () {
            if ($(document).width() < 768) {
                location.href = "../m/index.html";
            }
        });

        const apps = {
            "mycomputer": {
                "title": "Computer Title",
                "name": "Computer",
                "icon": "./assets/images/computer.png",
                "hidden": true,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "mycomputer.html",
                "screenSizes": {
                    "width": 600,
                    "height": 400
                }
            },
            "roadmap": {
                "title": "Roadmap",
                "name": "Roadmap",
                "icon": "./assets/images/roadmapIcon.png",
                "hidden": false,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "roadmap.html",
                "screenSizes": {
                    "width": 769,
                    "height": 500
                }
            },
            "game": {
                "title": "Game",
                "name": "Game",
                "icon": "./assets/images/game.png",
                "hidden": false,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "coming-soon.html",
                "screenSizes": {
                    "width": 600,
                    "height": 400
                }
            },
            "land": {
                "title": "Land",
                "name": "Land",
                "icon": "./assets/images/land.png",
                "hidden": false,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "coming-soon.html",
                "screenSizes": {
                    "width": 600,
                    "height": 400
                }
            },
            "tlscMenu": {
                "title": "TLSC Menu",
                "name": "TLSC Menu",
                "icon": "./assets/images/tlsc.png",
                "hidden": false,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "tlsc.html",
                "screenSizes": {
                    "width": 750,
                    "height": 400
                }
            },
            "marketplace": {
                "title": "Marketplace",
                "name": "Marketplace",
                "icon": "./assets/images/marketplace.png",
                "hidden": false,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "coming-soon.html",
                "screenSizes": {
                    "width": 600,
                    "height": 400
                }
            },
            "merch": {
                "title": "Merch",
                "name": "Merch",
                "icon": "./assets/images/merch.png",
                "hidden": false,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "merch.html",
                "screenSizes": {
                    "width": 750,
                    "height": 500
                }
            },
            "stake": {
                "title": "Stake",
                "name": "Stake",
                "icon": "./assets/images/stake.png",
                "hidden": false,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "coming-soon.html",
                "screenSizes": {
                    "width": 600,
                    "height": 400
                }
            },
            "team": {
                "title": "Team",
                "name": "Team",
                "icon": "./assets/images/team.png",
                "hidden": false,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "slideCard.html",
                "screenSizes": {
                    "width": 769,
                    "height": 500
                }
            },
            "token": {
                "title": "Token",
                "name": "Token",
                "icon": "./assets/images/token.png",
                "hidden": false,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "token.html",
                "screenSizes": {
                    "width": 750,
                    "height": 360
                }
            },
            "FAQ": {
                "title": "FAQ",
                "name": "FAQ",
                "icon": "./assets/images/faq.svg",
                "hidden": false,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "faq.html",
                "screenSizes": {
                    "width": 750,
                    "height": 500
                }
            },
            "sample": {
                "title": "Solanart",
                "name": "Solanart",
                "icon": "./assets/images/solanart.webp",
                "hidden": false,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "https://solanart.io",
                "screenSizes": {
                    "width": 750,
                    "height": 500
                }
            },
            "magiceden": {
                "title": "MagicEden",
                "name": "MagicEden",
                "icon": "./assets/images/magiceden.png",
                "hidden": false,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "https://magiceden.io",
                "screenSizes": {
                    "width": 750,
                    "height": 500
                }
            },
            "TLSCMeeting": {
                "title": "TLSC Meeting",
                "name": "TLSC Meeting",
                "icon": "./assets/images/chat.png",
                "hidden": false,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "goldCard.html",
                "screenSizes": {
                    "width": 750,
                    "height": 400,
                }
            },
            "DeGods": {
                "title": "DeGods",
                "name": "DeGods",
                "icon": "./assets/images/degods_bitmap.svg",
                "hidden": false,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "https://www.degods.com/",
                "screenSizes": {
                    "width": 750,
                    "height": 400,
                }
            },
            "DeadGods": {
                "title": "DeadGods",
                "name": "DeadGods",
                "icon": "./assets/images/degods_bitmap.svg",
                "hidden": false,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "https://www.deadgods.com/",
                "screenSizes": {
                    "width": 750,
                    "height": 400,
                }
            },
            "BlocksmithLabs": {
                "title": "Blocksmith Labs",
                "name": "Blocksmith Labs",
                "icon": "./assets/images/blocksmithlabs.svg",
                "hidden": false,
                "controls": {
                    "minimize": true,
                    "close": true
                },
                "content": "https://mercury.blocksmithlabs.io/login",
                "screenSizes": {
                    "width": 750,
                    "height": 400,
                }
            },
            "welcome": {
                "title": "Logged in 127.0.0.1 as lion@meta",
                "name": "LionOS",
                "icon": "./assets/images/lion.png",
                "hidden": true,
                "controls": {
                    "minimize": false,
                    "close": true
                },
                "content": "welcome.html",
                "screenSizes": {
                    "width": 600,
                    "height": 400
                }
            }

        }
        const openedApps = []
        const config = {
            "showPeekDesktop": 1,
            "startMenu": 2,
            "status": 1,
            "eventStatus": true,
            "dev": false,
            "osVersion": "1.2",
            "days": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            "months": ["January", "February", "March", "April", "May", "June", "July", "August", "September",
                "October", "November", "December"
            ],
            "maximumConcurrentOpenedApp": 5,
            "wallet": false,
            "clicked": false
        }
        const signInTypingConfig = {
            "username": {
                "i": 0,
                "text": "Lion",
                "speed": 50,
                "currentText": ""

            },
            "password": {
                "i": 0,
                "text": "******************",
                "speed": 20,
                "currentText": ""
            }
        }
        const encrypt = (text) => {
            return CryptoJS.AES.encrypt(text, "42d9405fc876e4c820ab91cecdba79e3de31d31d").toString();
        };

        const decrypt = (hash) => {
            return CryptoJS.AES.decrypt(hash, "42d9405fc876e4c820ab91cecdba79e3de31d31d").toString(CryptoJS.enc
                .Utf8);
        };
        const goLink = (platform) => {
            if (!platform) return
            switch (platform) {
                case "twitter":
                    window.open('https://twitter.com/metalionsio', '_blank');
                    break
                case "discord":
                    window.open('https://discord.gg/metalions', '_blank');
                    break
                case "instagram":
                    window.open('https://www.instagram.com/metalionsio/', '_blank');
                    break
                case "reddit":
                    window.open('https://www.reddit.com/r/MetaLions/', '_blank');
                    break
                case "medium":
                    window.open('https://medium.com/@metalions', '_blank');
                    break
                default:
                    window.open('https://www.instagram.com/metalionsio/', '_blank');
            }
        }
        const connectPhantomWallet = () => {
            let provider = () => {
                if ("solana" in window) {
                    let provider = window.solana;
                    if (provider.isPhantom) {
                        return provider;
                    } else {
                        return false;
                    }
                }
                window.open("https://phantom.app", "_blank");
            };
            const phantom = provider();
            if (phantom !== false) {
                //console.log("Phantom Wallet Found, Connecting..");
                try {
                    const connect_wallet = phantom.connect();
                    phantom.on("connect", async () => {
                        //console.log("Phantom Connected: " + phantom.isConnected);
                        const wallet_address = phantom.publicKey.toString();
                        $(".taskbar > .task.wallet").html(wallet_address.substring(0, 15) + "*".repeat(
                            10))
                        //console.log("Solana Wallet Address: " + wallet_address);
                        provider = window.solana;
                        connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl("mainnet-beta"),
                            "confirmed");
                        connection.getBalance(provider.publicKey).then(function (value) {
                            //console.log(value);
                            $(".taskbar > .task.wallet").html($(".taskbar > .task.wallet")
                                .html() + " (" + value + " SOL)")
                        })

                        setInterval(() => {
                            connection.getBalance(provider.publicKey).then(function (value) {
                                //console.log(value);
                                $(".taskbar > .task.wallet").html(wallet_address
                                    .substring(0, 15) + "*".repeat(10) + " (" +
                                    value + " SOL)")
                            })
                        }, 15 * 1000)
                        config["wallet"] = wallet_address;
                    });

                } catch (err) {
                    //console.log("Connection Cancelled!");
                    //console.log(err)
                }
            }
        }

        const timeout = (ms) => new Promise(res => setTimeout(res, ms))

        const typeUsername = () => {
            if (signInTypingConfig["username"]["i"] < signInTypingConfig["username"]["text"].length) {
                signInTypingConfig["username"]["currentText"] += signInTypingConfig["username"]["text"].charAt(
                    signInTypingConfig["username"]["i"])
                $("#username").val(signInTypingConfig["username"]["currentText"])
                signInTypingConfig["username"]["i"]++
                setTimeout(typeUsername, signInTypingConfig["username"]["speed"])
            }
        }

        const typePassword = () => {
            if (signInTypingConfig["password"]["i"] < signInTypingConfig["password"]["text"].length) {
                signInTypingConfig["password"]["currentText"] += signInTypingConfig["password"]["text"].charAt(
                    signInTypingConfig["password"]["i"])
                $("#password").val(signInTypingConfig["password"]["currentText"])
                signInTypingConfig["password"]["i"]++
                setTimeout(typePassword, signInTypingConfig["password"]["speed"])
            }
        }

        const setLatestOpenedApps = () => {
            if (localStorage.getItem("latestOpenedApps")) {
                let latestOpenedApps = localStorage.getItem("latestOpenedApps")
                latestOpenedApps = JSON.parse(latestOpenedApps)
                if (Object.keys(latestOpenedApps).length >= 1) {
                    latestOpenedApps = Object.keys(latestOpenedApps).sort(function (a, b) {
                        if (latestOpenedApps[a]["openCount"] < latestOpenedApps[b]["openCount"]) return 1
                        if (latestOpenedApps[a]["openCount"] > latestOpenedApps[b]["openCount"]) return -1
                        return 0
                    })

                    $(".apps").html("")
                    latestOpenedApps.forEach((k) => {
                        try {
                            if (!apps[k]["hidden"]) {
                                $(".apps").append(
                                    `<div class="app" data-app="${k}"><div class="icon"><img src="${apps[k]["icon"]}" /></div><div class="title">${apps[k]["name"]}</div></div>`
                                )
                            }
                        } catch (err) { }
                    })
                }
            } else {
                localStorage.setItem("latestOpenedApps", JSON.stringify({}))
            }
        }

        const storageOpenApplication = (appName) => {
            if (!appName || !apps[appName]) return
            if (localStorage.getItem("latestOpenedApps")) {
                let latestOpenedApps = localStorage.getItem("latestOpenedApps");
                latestOpenedApps = JSON.parse(latestOpenedApps)
                if (latestOpenedApps[appName]) {
                    latestOpenedApps[appName] = {
                        "openCount": (latestOpenedApps[appName]["openCount"] ? latestOpenedApps[appName][
                            "openCount"
                        ] : 0) + 1
                    }
                } else {
                    latestOpenedApps[appName] = {
                        "openCount": 1
                    }
                }
                localStorage.setItem("latestOpenedApps", JSON.stringify(latestOpenedApps))
                setLatestOpenedApps()
            } else {
                localStorage.setItem("latestOpenedApps", JSON.stringify({}))
            }
        }

        const updateEvents = (action) => {
            config["eventStatus"] = action
            if (action) {
                $("body").removeClass("cursorDisabled")
                setTimeout(() => {
                    $("body").removeClass("cursorDisabled");
                    setTimeout(() => $("body").removeClass("cursorDisabled"), 750)
                }, 750)
            } else {
                $("body").addClass("cursorDisabled")
            }
        }
        const pushAppToTaskbar = (appName) => {
            if (!appName || !openedApps[appName] || !config["eventStatus"]) return
            $(`<div class="task app" data-app="${appName}"><img class="w-10" src="${apps[appName]["icon"]}" alt="${apps[appName]["name"]}" /><div class="active"></div></div>`)
                .
                insertBefore(".taskbar .task:last")
        }
        const minimizeApp = (appName) => {
            if (!appName || !openedApps[appName] || !config["eventStatus"]) return
            $(".window#" + appName).finish().toggle(150)
            openedApps[appName]["status"] = 2
        }
        const maximizeApp = (appName) => {
            if (!appName || !openedApps[appName] || !config["eventStatus"]) return
            $(".window#" + appName).finish().toggle(150)
            openedApps[appName]["status"] = 1
        }
        const closeApp = (appName) => {
            if (!appName || !openedApps[appName] || !config["eventStatus"]) return
            $(".window#" + appName).remove()
            $(".task[data-app=\"" + appName + "\"]").remove()
            delete openedApps[appName]
        }

        $(document).ready(() => {
            $('.menu span:last-child').click(function () {
                $('.menu span').not(':last-child').toggleClass('hidden show');
            })
            if (Object.keys(apps).length >= 1) {
                Object.keys(apps).forEach((k) => {
                    try {
                        if (!apps[k]["hidden"]) {
                            $(".programs").append(
                                `<div class="program" data-app="${k}"><img src="${apps[k]["icon"]}" alt="${apps[k]["name"]}" /><div class="title">${apps[k]["name"]}</div></div>`
                            )
                        }
                    } catch (err) { }
                })
            }

            $.ajax({
                url: "https://twitterfetch.p.rapidapi.com/user/metalionsio",
                method: "GET",
                headers: {
                    'x-rapidapi-host': 'twitterfetch.p.rapidapi.com',
                    'x-rapidapi-key': '0d2628086cmsh7f72ff678ab32c6p1cd5bdjsn14220ef30590'
                },
                success: (data) => {
                    try {
                        if (data.tweets.length >= 1) {
                            data.tweets.forEach((k) => {
                                if (k.text.substr(0, 2) != "RT") {
                                    $("#twitterPosts").append(
                                        `<div class="post">${k.text}</div>`)
                                }
                            })
                        }
                    } catch (err) {
                        console.log(err)
                    }
                }
            })
            let bgSlider = ['bg1', 'bg2', 'bg3', 'bg4', 'bg5', 'bg6', 'bg7', 'bg8', 'bg9']
            // 'style',`background-image:url('./assets/sliders/${bgSlider[Math.floor(Math.random()*bgSlider.length)]}.png');`
            let bgSliderTemp = [];

            $(window).ready(function () {
                bgSlider.forEach(element => {
                    var tempImage = new Image();

                    tempImage.src = "./assets/sliders/" + element + ".png";
                    bgSliderTemp.push(tempImage);
                });
            });

            setInterval(() => {
                $('.desktop').css("background-image", `url('${bgSliderTemp[Math.floor(Math.random() * bgSliderTemp.length)].src}')`);
            }, 5000);

            if (!localStorage.getItem("firstTimeWelcome")) {
                updateEvents(false)
                const event = $(document).click(function (e) {
                    e.stopPropagation();
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    return false;
                });
                $(document).bind('contextmenu', function (e) {
                    e.stopPropagation();
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    return false;
                });
                $('.bg-mask').attr('style', 'display:block')

                setTimeout(() => {
                    $('.bg-mask').attr('style', 'display:none')
                }, 25000);
                setTimeout(() => {
                    $(".window#welcome").finish().toggle(500)

                    setTimeout(() => {
                        openedApps["welcome"] = {
                            "status": 1
                        }

                        const typewriteWelcome = new Typewriter(document.getElementById(
                            "welcomeMessage"), {
                            loop: false,
                        });

                        typewriteWelcome.typeString("Hi there!")
                            .pauseFor(3000)
                            .deleteAll()
                            .typeString(
                                "Welcome to <strong>LionOS</strong>!"
                            )
                            .pauseFor(3000)
                            .deleteAll()
                            .typeString("Thanks for joining us!")
                            .pauseFor(5000)
                            .callFunction(() => {
                                updateEvents(true)
                                closeApp("welcome")
                                $(document).unbind("click")
                                $(document).unbind("contextmenu")
                                if (!config["dev"]) {
                                    localStorage.setItem("firstTimeWelcome", true)
                                }
                            })
                            .start();
                    }, 1000)
                }, 1500)

            }

            setInterval(() => {
                let currentTime = new Date()
                let currentHours = currentTime.getHours()
                let currentMinutes = currentTime.getMinutes()

                let currentDay = currentTime.getDate()
                let currentMonth = currentTime.getUTCMonth()
                let currentYear = currentTime.getFullYear()

                currentMinutes = (currentMinutes < 10 ? 0 : "") + "" + currentMinutes
                let timeOfDay = (currentHours < 12) ? "AM" : "PM"
                currentHours = (currentHours > 12) ? currentHours - 12 : currentHours
                currentHours = (currentHours == 0) ? 12 : currentHours

                $(".task.date > .clock").html(currentHours + ":" + currentMinutes + " " + timeOfDay)
                $(".task.date > .date").html(currentMonth + "/" + currentDay + "/" + currentYear)
                $(".lock > .box > .clock").html(currentHours + ":" + currentMinutes)
                $(".lock > .box > .date").html(config["days"][currentTime.getDay()] + ", " + config[
                    "months"][currentTime.getMonth()] + " " + currentYear.toString().slice(-2))


                localStorage.setItem("staticConfig", encrypt(JSON.stringify(config)))

                if (Object.keys(openedApps).length <= 0) {
                    config["showPeekDesktop"] = 1
                }
                let windowsHeight = $(".windows").height()
                console.log(windowsHeight)
                $('.programs').attr('style', `height:${windowsHeight}px`)
            }, 1000)

            $("body .lock").click(async () => {
                if (config["clicked"]) return
                config["clicked"] = true
                if (!config["dev"]) {
                    if (config["status"] == 1) {
                        $(".lock")
                            .animate({
                                "bottom": "3000px"
                            }, 2000);
                        $(".signin").finish().toggle(100)
                        await timeout(2000)
                        $("#username").focus()
                        await timeout(500)
                        typeUsername()
                        await timeout(1000)
                        $("#username").blur()
                        await timeout(250)
                        $("#password").focus()
                        await timeout(300)
                        typePassword()
                        await timeout(1000)
                        $("#password").blur()
                        await timeout(300)
                        $(".box > .inputArea").addClass("hidden")
                        $(".box .welcome").removeClass("hidden")
                        $(".programs").hide()
                        await timeout(300)
                        $(".signin").fadeOut(300)
                        $(".desktop").fadeIn(200)
                        await timeout(1000);
                        $(".programs").fadeIn(300)
                        config["status"] = 2;
                        await timeout(1000);
                        $(".box > .inputArea").removeClass("hidden")
                        $(".box .welcome").addClass("hidden")
                    }
                } else {
                    if (config["status"] == 1) {
                        $(".lock").hide()
                        $(".desktop").show()
                        $(".programs").show()
                        config["status"] = 2
                        //chatlion development
                        setTimeout(() => {
                            $(".program[data-app=\"chatlion\"]").dblclick()
                        }, 500)
                    }
                }
            })

            if (config["dev"]) {
                $("body .lock").click()
            }
            $(".contextArea").bind("contextmenu", function (e) {
                e.preventDefault()
                if (!config["eventStatus"]) return
                $(".contextMenu").finish().toggle(100).css({
                    top: e.pageY + "px",
                    left: e.pageX + "px"
                })
            })
            $(".taskbar").not(".app").bind("contextmenu", function (e) {
                e.preventDefault()
            })
            $(".startMenu, .program, .contextMenu, .taskbarContextMenu, .signin, .lock, .programs, .window")
                .bind("contextmenu", function (e) {
                    e.preventDefault()
                })
            $(".taskbar").on("contextmenu", ".task.app", function (e) {
                e.preventDefault()
                if (!config["eventStatus"]) return
                $(".taskbarContextMenu").attr("data-app", $(this).attr("data-app"))
                $(".taskbarContextMenu").finish().toggle(100).css({
                    top: ($(".taskbar").position().top - 55) + "px",
                    left: e.pageX + "px"
                })
            })
            $(document).bind("mousedown", function (e) {
                if (!$(e.target).parents(".contextMenu").length > 0) {
                    $(".contextMenu").hide(100)
                }
                if (!$(e.target).parents(".taskbarContextMenu").length > 0) {
                    $(".taskbarContextMenu").hide(100)
                }
            })
            $(".contextMenu > .items > .item").click(function () {
                switch ($(this).attr("data-action")) {
                    case "refresh":
                        if (Object.keys(apps).length >= 1) {
                            $(".programs").html("")
                            Object.keys(apps).forEach((k, v) => {
                                try {
                                    if (!apps[k]["hidden"]) {
                                        setTimeout(() => $(".programs").append(
                                            `<div class="program" data-app="${k}"><img src="${apps[k]["icon"]}" alt="${apps[k]["name"]}" /><div class="title">${apps[k]["name"]}</div></div>`
                                        ), ((v >= 5 ? (v % 2) : v) + 1) * 50)
                                    }
                                } catch (err) { }
                            })
                        }
                        break;
                    case "alert":
                        alert("ALEEEERT");
                        break;
                }
                $(".contextMenu").hide(100)
            })
            $(".taskbarContextMenu > .items > .item").click(function () {
                switch ($(this).attr("data-action")) {
                    case "close":
                        closeApp($(".taskbarContextMenu").attr("data-app"))
                        break;
                }
                $(".taskbarContextMenu").hide(100)
            })
            $("body").click(() => {
                if (!config["eventStatus"]) return
                if (config["startMenu"] == 1) {
                    $(".startMenu").finish().toggle(300)
                    config["startMenu"] = 2
                    $(".taskbar > .task.startMenuBtn > .active").remove()
                }
            })

            $(".taskbar > .task.wallet").click((e) => {
                if (!config["wallet"]) {
                    connectPhantomWallet()
                }
            })

            $(".taskbar > .task.startMenuBtn").not(".date").click((e) => {
                if (!config["eventStatus"]) return
                if (config["startMenu"] == 1) {
                    $(".startMenu").finish().toggle(300)
                    config["startMenu"] = 2
                    $(".taskbar > .task.startMenuBtn > .active").not(".date").remove()
                } else {
                    $(".startMenu").finish().toggle(300)
                    config["startMenu"] = 1
                    $(".taskbar > .task.startMenuBtn").not(".date").prepend(
                        `<div class="active"></div>`)
                    e.stopPropagation()
                }
            })
            $(".showPeekDesktop").click(() => {
                if (!config["eventStatus"]) return
                if (Object.keys(openedApps).length >= 1) {
                    Object.keys(openedApps).forEach((k) => {
                        if (config["showPeekDesktop"] == 1) {
                            minimizeApp(k)
                            openedApps[k]["status"] = 2
                        } else {
                            maximizeApp(k)
                            openedApps[k]["status"] = 1
                        }
                    })
                    setTimeout(() => config["showPeekDesktop"] = (config["showPeekDesktop"] == 1 ? 2 :
                        1), 500)
                }
            })
            $(".apps").on("click", ".app", function () {
                if (!config["eventStatus"]) return
                const appName = $(this).attr("data-app")
                if (!appName || openedApps[appName] || !apps[appName]) return
                if (Object.keys(openedApps).length >= config["maximumConcurrentOpenedApp"]) {
                    //alert
                    return
                }
                $("body").addClass("cursorWaiting")
                openedApps[appName] = {
                    "status": 1
                }
                setTimeout(() => {
                    $(".window#" + appName).finish().toggle(300)
                    pushAppToTaskbar(appName)
                    $("body").removeClass("cursorWaiting")
                    storageOpenApplication(appName)
                }, 2000)
            })
            $(".programs").on("dblclick", ".program", function () {

                if (!config["eventStatus"]) return
                const appName = $(this).attr("data-app")
                if (!appName || openedApps[appName] || !apps[appName]) return
                if (Object.keys(openedApps).length >= config["maximumConcurrentOpenedApp"]) {
                    //alert
                    return
                }
                $("body").addClass("cursorWaiting")
                openedApps[appName] = {
                    "status": 1
                }

                setTimeout(() => {
                    $(".windows").prepend(`<div class="window application hidden size" id="${appName}">

                                                <div class="controls">
                                                    <div class="left">
                                                        <div class="favicon">
                                                            ${apps[appName]["icon"] ? `<img src="${apps[appName]["icon"]}" />` : `<i class="fas fa-folder"></i>`}
                                                        </div>
                                                    </div>
                                                    <div class="center">
                                                        <div class="title">${apps[appName]["title"] ? apps[appName]["title"] : "LionOS"}</div>
                                                    </div>
                                                    <div class="right">
                                                        ${apps[appName]["controls"]["minimize"] ? `<div class="minimize" onClick="minimizeApp('${appName}')"><i class="fal fa-window-minimize"></i></div>` : ""}
                                                        ${apps[appName]["controls"]["close"] ? `<div class="close" onClick="closeApp('${appName}')"><i class="fal fa-times"></i></div>` : ""}
                                                    </div>
                                                </div>
                                                <div class="content" style="width: 100%;height: 100%;">
                                                    <iframe  src="${apps[appName]["content"]}" width="${apps[appName]["screenSizes"]["width"]}" height="${apps[appName]["screenSizes"]["height"]}" target="_self" frameBorder="0">An error occurred while launch app on LionOS. Please contact with developer.</iframe>
                                                </div>
                                                <div class="footer">LionOS v${config["osVersion"]} alpha</div>
                                        </div>`)


                    // var txt = $(".size").width();
                    // alert(txt);

                    $("iframe").css({ "min-width": "100%", "min-height": "100%" })


                    $(".window").draggable({
                        containment: ".windows",
                        //cursor: "move",
                        animate: true,
                        ghost: true,
                        //opacity: 0.9,
                        start: () => {
                            if ($("body div:last").html() == "") {
                                $("body div:last").hide()
                            }
                        },
                        drag: () => {
                            if ($("body div:last").html() == "") {
                                $("body div:last").hide()
                            }
                        },
                        stop: () => {
                            if ($("body div:last").html() == "") {
                                $("body div:last").show()
                            }
                        },
                        handles: "n,s,e,w,ne,se,nw,sw",
                    }).css({
                        top: (($('.windows').height() - 600) / 2) - 50, // 2000width window - 800width = 1200px start chat position x
                        left: ($('.windows').width() - 800) / 2
                    }).resizable();

                    $(".window#" + appName).finish().toggle(300)
                    pushAppToTaskbar(appName)
                    $("body").removeClass("cursorWaiting")
                    storageOpenApplication(appName)
                }, (config["dev"] ? 100 : 2000))


            })

            $(".taskbar").on("click", ".task", function () {
                if (!config["eventStatus"]) return
                const appName = $(this).attr("data-app")
                if (!appName || !openedApps[appName]) return;
                if (openedApps[appName]["status"] == 1) {
                    minimizeApp(appName)
                } else {
                    maximizeApp(appName)
                }
            })
            setLatestOpenedApps()
        })

        $(".program").click(function () {
            $(".ui-icon-gripsmall-diagonal-se").addClass("rasih");
        });

        $("#target").click(function () {
            alert("Handler for .click() called.");
        });
    </script>
</body>

</html>